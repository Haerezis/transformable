{"version":3,"sources":["transformable.min.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_minivents","_minivents2","_utils","_utils2","_unmatrix","Transformable","element","container","lastState","x","offsetLeft","offsetWidth","y","offsetTop","offsetHeight","width","height","compensation","angle","currentState","Dup","style","top","bottom","left","right","moveInfos","resizeInfos","rotationInfos","rotationStep","minimumSize","_resizeOnMousedownBound","_resizeOnMousedown","bind","_resizeOnMousemoveBound","_resizeOnMousemove","_resizeOnMouseupBound","_resizeOnMouseup","_moveOnMousedownBound","_moveOnMousedown","_moveOnMousemoveBound","_moveOnMousemove","_moveOnMouseupBound","_moveOnMouseup","_rotationOnMousedownBound","_rotationOnMousedown","_rotationOnMousemoveBound","_rotationOnMousemove","_rotationOnMouseupBound","_rotationOnMouseup","_addHandles","update","handles","classList","add","remove","inc","position","resize","delta","_transform","_normalize","containerBoundingBox","getBoundingClientRect","boundingRect","insertAdjacentHTML","querySelector","_addMoveHandle","_addResizeHandles","_addRotationHandle","resize_handles","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","handle","addEventListener","err","return","move_handle","rotation_handle","updateLastState","arguments","s","transform","transformOrigin","center","event","button","emit","initial","mouse","clientX","clientY","document","move","moveTo","removeEventListener","handleClass","keys","filter","contains","includes","start","current","Rotate","resizeBy","centerToMouse","Angle","Math","round","rotateTo","n","t","e","on","r","l","push","off","o","u","splice","slice","apply","Utils","source","atan2","Cross","Dot","PI","v1","v2","point","radians","cos","sin","object","JSON","parse","stringify","el","wrapper","parentNode","insertBefore","appendChild","unmatrix","str","stom","A","B","C","D","Error","scaleX","sqrt","skew","scaleY","translateX","translateY","rotate","rtod","atan","window","getComputedStyle","getPropertyValue","WebKitCSSMatrix","a","b","d","f","rdigit","exec","deg"],"mappings":"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","file":"transformable.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"transformable\"] = factory();\n\telse\n\t\troot[\"transformable\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _minivents = __webpack_require__(1);\n\t\n\tvar _minivents2 = _interopRequireDefault(_minivents);\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tvar _utils2 = _interopRequireDefault(_utils);\n\t\n\tvar _unmatrix = __webpack_require__(3);\n\t\n\tvar _unmatrix2 = _interopRequireDefault(_unmatrix);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Transformable = function () {\n\t\n\t  ////////////////////////////////////////////\n\t  //// PUBLIC\n\t  ////////////////////////////////////////////\n\t\n\t  /**\n\t   * Create a Transformable instance\n\t   * @constructor\n\t   * @param element - The DOM element to attach to.\n\t   * @param container - The DOM element that where the mousemove event will be detected.\n\t   */\n\t  function Transformable(element, container) {\n\t    _classCallCheck(this, Transformable);\n\t\n\t    // Mixing minivent to this instance for on/off/this.emit methods\n\t    (0, _minivents2.default)(this);\n\t\n\t    this.element = element;\n\t    this.container = container;\n\t\n\t    this.lastState = {\n\t      x: this.element.offsetLeft + this.element.offsetWidth / 2,\n\t      y: this.element.offsetTop + this.element.offsetHeight / 2,\n\t      width: this.element.offsetWidth,\n\t      height: this.element.offsetHeight,\n\t      compensation: {\n\t        x: 0,\n\t        y: 0\n\t      },\n\t      angle: 0\n\t    };\n\t    this.currentState = _utils2.default.Dup(this.lastState);\n\t\n\t    this.element.style.top = \"0px\";\n\t    this.element.style.bottom = \"0px\";\n\t    this.element.style.left = \"0px\";\n\t    this.element.style.right = \"0px\";\n\t\n\t    this.moveInfos = {};\n\t    this.resizeInfos = {};\n\t    this.rotationInfos = {};\n\t\n\t    this.rotationStep = 5;\n\t    this.minimumSize = 10;\n\t\n\t    // Callback needs to have \"this\" bound or else \"this\" won't be the instance of the class.\n\t    this._resizeOnMousedownBound = this._resizeOnMousedown.bind(this);\n\t    this._resizeOnMousemoveBound = this._resizeOnMousemove.bind(this);\n\t    this._resizeOnMouseupBound = this._resizeOnMouseup.bind(this);\n\t    this._moveOnMousedownBound = this._moveOnMousedown.bind(this);\n\t    this._moveOnMousemoveBound = this._moveOnMousemove.bind(this);\n\t    this._moveOnMouseupBound = this._moveOnMouseup.bind(this);\n\t    this._rotationOnMousedownBound = this._rotationOnMousedown.bind(this);\n\t    this._rotationOnMousemoveBound = this._rotationOnMousemove.bind(this);\n\t    this._rotationOnMouseupBound = this._rotationOnMouseup.bind(this);\n\t\n\t    this._addHandles();\n\t\n\t    this.update();\n\t  }\n\t\n\t  /**\n\t   * Disable the handles (and thus interaction with the Transformable instance).\n\t   */\n\t\n\t\n\t  _createClass(Transformable, [{\n\t    key: 'disable',\n\t    value: function disable() {\n\t      this.handles.classList.add('hidden');\n\t    }\n\t\n\t    /**\n\t     * Enable the handles.\n\t     */\n\t\n\t  }, {\n\t    key: 'enable',\n\t    value: function enable() {\n\t      this.handles.classList.remove('hidden');\n\t    }\n\t\n\t    /**\n\t     * Move the Transformable by an increment.\n\t     * @param {Object} inc - the position increment => {x: 42, y: 42}.\n\t     */\n\t\n\t  }, {\n\t    key: 'moveBy',\n\t    value: function moveBy(inc) {\n\t      this.currentState.x += inc.x;\n\t      this.currentState.y += inc.y;\n\t    }\n\t\n\t    /**\n\t     * Move the Transformable to a specific position.\n\t     * Warning : the Transformable's origin is not the top left but the center.\n\t     *\n\t     * @param {Object} position - the position where the element should be moved => {x: 42, y: 42}.\n\t     */\n\t\n\t  }, {\n\t    key: 'moveTo',\n\t    value: function moveTo(position) {\n\t      this.currentState.x = position.x;\n\t      this.currentState.y = position.y;\n\t    }\n\t\n\t    /**\n\t     * Resize the Transformable by an increment.\n\t     * @param {Object} resize - The resize values for the 4 sides of the element => {left:a, top:b, right:c, bottom:d}.\n\t     */\n\t\n\t  }, {\n\t    key: 'resizeBy',\n\t    value: function resizeBy(resize) {\n\t      resize.left = resize.left || 0;\n\t      resize.right = resize.right || 0;\n\t      resize.top = resize.top || 0;\n\t      resize.bottom = resize.bottom || 0;\n\t\n\t      var delta = {\n\t        x: resize.right + resize.left,\n\t        y: resize.top + resize.bottom\n\t      };\n\t\n\t      if (this.currentState.width + delta.x < this.minimumSize) {\n\t        delta.x = this.minimumSize - this.currentState.width;\n\t      }\n\t      if (this.currentState.height + delta.y < this.minimumSize) {\n\t        delta.y = this.minimumSize - this.currentState.height;\n\t      }\n\t\n\t      this.currentState.width += delta.x;\n\t      if (resize.left != 0) {\n\t        this.currentState.compensation.x -= delta.x / 2;\n\t      }\n\t      if (resize.right != 0) {\n\t        this.currentState.compensation.x += delta.x / 2;\n\t      }\n\t\n\t      this.currentState.height += delta.y;\n\t      if (resize.top != 0) {\n\t        this.currentState.compensation.y -= delta.y / 2;\n\t      }\n\t      if (resize.bottom != 0) {\n\t        this.currentState.compensation.y += delta.y / 2;\n\t      }\n\t    }\n\t\n\t    /**\n\t     * Rotate the Transformable by an angle.\n\t     * @param {Integer} angle - the angle to rotate to (in degree).\n\t     */\n\t\n\t  }, {\n\t    key: 'rotateBy',\n\t    value: function rotateBy(angle) {\n\t      this.currentState.angle += angle;\n\t    }\n\t\n\t    /**\n\t     * Set the rotation angle of the Transformable.\n\t     * @param {Integer} angle - the angle of the element after rotation (in degree).\n\t     */\n\t\n\t  }, {\n\t    key: 'rotateTo',\n\t    value: function rotateTo(angle) {\n\t      this.currentState.angle = angle;\n\t    }\n\t\n\t    /**\n\t     * Update the display of the Transformable based on its internal state.\n\t     */\n\t\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      this._transform(true);\n\t      this._normalize();\n\t    }\n\t\n\t    /**\n\t     * Get the center position of the Transformable.\n\t     */\n\t\n\t  }, {\n\t    key: 'center',\n\t    value: function center() {\n\t      var containerBoundingBox = this.container.getBoundingClientRect();\n\t      var boundingRect = this.element.getBoundingClientRect();\n\t\n\t      return {\n\t        x: boundingRect.left - containerBoundingBox.left + boundingRect.width / 2,\n\t        y: boundingRect.top - containerBoundingBox.top + boundingRect.height / 2\n\t      };\n\t    }\n\t\n\t    /**\n\t     * Get the current width of the Transformable.\n\t     */\n\t\n\t  }, {\n\t    key: 'width',\n\t    value: function width() {\n\t      return this.currentState.width;\n\t    }\n\t\n\t    /**\n\t     * Get the current height of the Transformable.\n\t     */\n\t\n\t  }, {\n\t    key: 'height',\n\t    value: function height() {\n\t      return this.currentState.height;\n\t    }\n\t\n\t    /**\n\t     * Get the current position of the Transformable.\n\t     */\n\t\n\t  }, {\n\t    key: 'position',\n\t    value: function position() {\n\t      return { x: this.currentState.x, y: this.currentState.y };\n\t    }\n\t\n\t    /**\n\t     * Get the current angle (in degree) of the Transformable.\n\t     */\n\t\n\t  }, {\n\t    key: 'angle',\n\t    value: function angle() {\n\t      return this.currentState.angle;\n\t    }\n\t\n\t    ////////////////////////////////////////////\n\t    //// PROTECTED\n\t    ////////////////////////////////////////////\n\t\n\t  }, {\n\t    key: '_addHandles',\n\t    value: function _addHandles() {\n\t      this.element.insertAdjacentHTML('beforeend', '<div class=\"handles noselect\"></div>');\n\t      this.handles = this.element.querySelector('.handles');\n\t\n\t      this._addMoveHandle();\n\t      this._addResizeHandles();\n\t      this._addRotationHandle();\n\t    }\n\t  }, {\n\t    key: '_addResizeHandles',\n\t    value: function _addResizeHandles() {\n\t      var handles = ['tl', 'tm', 'tr', 'ml', 'mr', 'bl', 'bm', 'br'];\n\t\n\t      this.resize_handles = {};\n\t      var _iteratorNormalCompletion = true;\n\t      var _didIteratorError = false;\n\t      var _iteratorError = undefined;\n\t\n\t      try {\n\t        for (var _iterator = handles[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t          var handle = _step.value;\n\t\n\t          this.handles.insertAdjacentHTML('beforeend', '<span class=\\'resize_handles ' + handle + '\\'></span>');\n\t          this.resize_handles[handle] = this.element.querySelector('.resize_handles.' + handle);\n\t          this.resize_handles[handle].addEventListener('mousedown', this._resizeOnMousedownBound);\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError = true;\n\t        _iteratorError = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion && _iterator.return) {\n\t            _iterator.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError) {\n\t            throw _iteratorError;\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: '_addMoveHandle',\n\t    value: function _addMoveHandle() {\n\t      this.handles.insertAdjacentHTML('beforeend', '\\n        <span class=\\'move_handle\\'></span>\\n    ');\n\t\n\t      this.move_handle = this.element.querySelector('.move_handle');\n\t      this.move_handle.addEventListener('mousedown', this._moveOnMousedownBound);\n\t    }\n\t  }, {\n\t    key: '_addRotationHandle',\n\t    value: function _addRotationHandle() {\n\t      this.handles.insertAdjacentHTML('beforeend', '\\n        <span class=\\'rotation_handle\\'></span>\\n    ');\n\t\n\t      this.rotation_handle = this.element.querySelector('.rotation_handle');\n\t      this.rotation_handle.addEventListener('mousedown', this._rotationOnMousedownBound);\n\t    }\n\t  }, {\n\t    key: '_transform',\n\t    value: function _transform() {\n\t      var updateLastState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\t\n\t      var s = this.currentState;\n\t      var transform = '\\n      translate(' + s.x + 'px, ' + s.y + 'px)\\n      rotate(' + s.angle + 'deg)\\n      translate(calc(' + s.compensation.x + 'px - 50%), calc(' + s.compensation.y + 'px - 50%))\\n      ';\n\t\n\t      this.element.style.width = s.width + 'px';\n\t      this.element.style.height = s.height + 'px';\n\t      this.element.style.transform = transform;\n\t      this.element.style.transformOrigin = 'left top';\n\t\n\t      if (updateLastState) {\n\t        this.lastState = _utils2.default.Dup(s);\n\t      }\n\t    }\n\t  }, {\n\t    key: '_normalize',\n\t    value: function _normalize() {\n\t      var center = this.center();\n\t      this.currentState.x = center.x;\n\t      this.currentState.y = center.y;\n\t      this.currentState.compensation = { x: 0, y: 0 };\n\t      this._transform();\n\t    }\n\t\n\t    //////////////////////////////////////////////\n\t    // CALLBACK\n\t    /////////////////////////////////////////////\n\t\n\t    ////////////\n\t    // move callback\n\t    ////////////\n\t\n\t  }, {\n\t    key: '_moveOnMousedown',\n\t    value: function _moveOnMousedown(event) {\n\t      //If left mouse\n\t      if (event.button == 0) {\n\t        this.emit('move:start');\n\t\n\t        this.moveInfos.initial = {\n\t          x: this.currentState.x,\n\t          y: this.currentState.y\n\t        };\n\t        this.moveInfos.mouse = {\n\t          x: event.clientX,\n\t          y: event.clientY\n\t        };\n\t\n\t        this.container.addEventListener('mousemove', this._moveOnMousemoveBound);\n\t        document.addEventListener('mouseup', this._moveOnMouseupBound);\n\t      }\n\t    }\n\t  }, {\n\t    key: '_moveOnMousemove',\n\t    value: function _moveOnMousemove(event) {\n\t      this.emit('move:ongoing');\n\t\n\t      var move = {\n\t        x: event.clientX - this.moveInfos.mouse.x + this.moveInfos.initial.x,\n\t        y: event.clientY - this.moveInfos.mouse.y + this.moveInfos.initial.y\n\t      };\n\t\n\t      this.moveTo(move);\n\t      this._transform();\n\t    }\n\t  }, {\n\t    key: '_moveOnMouseup',\n\t    value: function _moveOnMouseup(event) {\n\t      this.emit('move:stop');\n\t\n\t      this.update();\n\t\n\t      this.container.removeEventListener('mousemove', this._moveOnMousemoveBound);\n\t      document.removeEventListener('mouseup', this._moveOnMouseupBound);\n\t    }\n\t\n\t    ////////////\n\t    // resize callbacks\n\t    ////////////\n\t\n\t  }, {\n\t    key: '_resizeOnMousedown',\n\t    value: function _resizeOnMousedown(event) {\n\t      //If left mouse\n\t      if (event.button == 0) {\n\t        this.emit('resize:start');\n\t\n\t        var handleClass = Object.keys(this.resize_handles).filter(function (x) {\n\t          return event.target.classList.contains(x);\n\t        })[0];\n\t\n\t        //handles on the top or left side also change the position of the element to counterbalance the size change.\n\t        this.resizeInfos.resize = {\n\t          left: handleClass.includes('l'),\n\t          right: handleClass.includes('r'),\n\t          top: handleClass.includes('t'),\n\t          bottom: handleClass.includes('b')\n\t        };\n\t        this.resizeInfos.mouse = {\n\t          x: event.clientX,\n\t          y: event.clientY\n\t        };\n\t\n\t        this.container.addEventListener('mousemove', this._resizeOnMousemoveBound);\n\t        document.addEventListener('mouseup', this._resizeOnMouseupBound);\n\t      }\n\t    }\n\t  }, {\n\t    key: '_resizeOnMousemove',\n\t    value: function _resizeOnMousemove(event) {\n\t      this.emit('resize:ongoing');\n\t\n\t      //Rotate start and current mouse position to match this.element rotated referentiel\n\t      var center = this.center();\n\t      var start = {\n\t        x: this.resizeInfos.mouse.x - center.x,\n\t        y: this.resizeInfos.mouse.y - center.y\n\t      };\n\t      var current = {\n\t        x: event.clientX - center.x,\n\t        y: event.clientY - center.y\n\t      };\n\t      start = _utils2.default.Rotate(start, -this.currentState.angle);\n\t      current = _utils2.default.Rotate(current, -this.currentState.angle);\n\t\n\t      var delta = {\n\t        x: current.x - start.x,\n\t        y: current.y - start.y\n\t      };\n\t\n\t      var resize = {\n\t        left: 0,\n\t        right: 0,\n\t        top: 0,\n\t        bottom: 0\n\t      };\n\t      if (this.resizeInfos.resize.left) {\n\t        resize.left = -delta.x;\n\t      }\n\t      if (this.resizeInfos.resize.right) {\n\t        resize.right = delta.x;\n\t      }\n\t      if (this.resizeInfos.resize.top) {\n\t        resize.top = -delta.y;\n\t      }\n\t      if (this.resizeInfos.resize.bottom) {\n\t        resize.bottom = delta.y;\n\t      }\n\t\n\t      this.currentState = _utils2.default.Dup(this.lastState);\n\t      this.resizeBy(resize);\n\t      this._transform(false);\n\t    }\n\t  }, {\n\t    key: '_resizeOnMouseup',\n\t    value: function _resizeOnMouseup(event) {\n\t      this.emit('resize:stop');\n\t\n\t      this.update();\n\t\n\t      this.container.removeEventListener('mousemove', this._resizeOnMousemoveBound);\n\t      document.removeEventListener('mouseup', this._resizeOnMouseupBound);\n\t    }\n\t\n\t    ////////////\n\t    // Rotation callbacks\n\t    ////////////\n\t\n\t  }, {\n\t    key: '_rotationOnMousedown',\n\t    value: function _rotationOnMousedown(event) {\n\t      //If left mouse\n\t      if (event.button == 0) {\n\t        this.emit('rotation:start');\n\t\n\t        this.rotationInfos.angle = this.currentState.angle;\n\t        this.rotationInfos.center = this.center();\n\t        this.rotationInfos.centerToMouse = {\n\t          x: event.clientX - this.rotationInfos.center.x,\n\t          y: this.rotationInfos.center.y - event.clientY\n\t        };\n\t\n\t        this.container.addEventListener('mousemove', this._rotationOnMousemoveBound);\n\t        document.addEventListener('mouseup', this._rotationOnMouseupBound);\n\t      }\n\t    }\n\t  }, {\n\t    key: '_rotationOnMousemove',\n\t    value: function _rotationOnMousemove(event) {\n\t      this.emit('rotation:ongoing');\n\t\n\t      var centerToMouse = {\n\t        x: event.clientX - this.rotationInfos.center.x,\n\t        y: this.rotationInfos.center.y - event.clientY\n\t      };\n\t\n\t      var angle = _utils2.default.Angle(this.rotationInfos.centerToMouse, centerToMouse);\n\t      angle = Math.round(angle / this.rotationStep) * this.rotationStep;\n\t\n\t      this.rotateTo(this.rotationInfos.angle + angle);\n\t      this._transform();\n\t    }\n\t  }, {\n\t    key: '_rotationOnMouseup',\n\t    value: function _rotationOnMouseup(event) {\n\t      this.emit('rotation:stop');\n\t\n\t      this.update();\n\t\n\t      this.container.removeEventListener('mousemove', this._rotationOnMousemoveBound);\n\t      document.removeEventListener('mouseup', this._rotationOnMouseupBound);\n\t    }\n\t  }]);\n\t\n\t  return Transformable;\n\t}();\n\t\n\texports.default = Transformable;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\tmodule.exports=function(n){var t={},e=[];n=n||this,n.on=function(e,r,l){return(t[e]=t[e]||[]).push([r,l]),n},n.off=function(r,l){r||(t={});for(var o=t[r]||e,u=o.length=l?o.length:0;u--;)l==o[u][0]&&o.splice(u,1);return n},n.emit=function(r){for(var l,o=t[r]||e,u=o.length>0?o.slice(0,o.length):o,i=0;l=u[i++];)l[0].apply(l[1],e.slice.call(arguments,1));return n}};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Utils = function () {\n\t  function Utils() {\n\t    _classCallCheck(this, Utils);\n\t  }\n\t\n\t  _createClass(Utils, null, [{\n\t    key: \"Angle\",\n\t    value: function Angle(target, source) {\n\t      //return (Math.atan2(target.y, target.x) - Math.atan2(target.y, target.x)) * 180 / Math.PI;\n\t      return Math.atan2(Utils.Cross(source, target), Utils.Dot(source, target)) * 180 / Math.PI;\n\t    }\n\t  }, {\n\t    key: \"Dot\",\n\t    value: function Dot(v1, v2) {\n\t      return v1.x * v2.x + v1.y * v2.y;\n\t    }\n\t  }, {\n\t    key: \"Cross\",\n\t    value: function Cross(v1, v2) {\n\t      return v1.x * v2.y - v1.y * v2.x;\n\t    }\n\t  }, {\n\t    key: \"Rotate\",\n\t    value: function Rotate(point, angle) {\n\t      var radians = Math.PI / 180 * angle;\n\t      var cos = Math.cos(radians);\n\t      var sin = Math.sin(radians);\n\t\n\t      return {\n\t        x: cos * point.x - sin * point.y,\n\t        y: cos * point.y + sin * point.x\n\t      };\n\t    }\n\t  }, {\n\t    key: \"Dup\",\n\t    value: function Dup(object) {\n\t      return JSON.parse(JSON.stringify(object));\n\t    }\n\t  }, {\n\t    key: \"Wrap\",\n\t    value: function Wrap(el, wrapper) {\n\t      el.parentNode.insertBefore(wrapper, el);\n\t      wrapper.appendChild(el);\n\t    }\n\t  }]);\n\t\n\t  return Utils;\n\t}();\n\t\n\texports.default = Utils;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Code taken from https://github.com/matthewmueller/unmatrix\n\t */\n\t\n\t/**\n\t * Expose `unmatrix`\n\t */\n\t\n\texports.default = unmatrix;\n\t\n\t/**\n\t * Unmatrix\n\t *\n\t * @param {Element} el\n\t * @return {Object}\n\t */\n\t\n\tfunction unmatrix(el) {\n\t  return 'string' != typeof el ? parse(style(el)) : parse(el);\n\t}\n\t\n\t/**\n\t * Unmatrix: parse the values of the matrix\n\t *\n\t * Algorithm from:\n\t *\n\t * - http://hg.mozilla.org/mozilla-central/file/7cb3e9795d04/layout/style/nsStyleAnimation.cpp\n\t *\n\t * @param {String} str\n\t * @return {Object}\n\t * @api public\n\t */\n\t\n\tfunction parse(str) {\n\t  var m = stom(str);\n\t  var A = m[0];\n\t  var B = m[1];\n\t  var C = m[2];\n\t  var D = m[3];\n\t\n\t  if (A * D == B * C) throw new Error('transform#unmatrix: matrix is singular');\n\t\n\t  // step (3)\n\t  var scaleX = Math.sqrt(A * A + B * B);\n\t  A /= scaleX;\n\t  B /= scaleX;\n\t\n\t  // step (4)\n\t  var skew = A * C + B * D;\n\t  C -= A * skew;\n\t  D -= B * skew;\n\t\n\t  // step (5)\n\t  var scaleY = Math.sqrt(C * C + D * D);\n\t  C /= scaleY;\n\t  D /= scaleY;\n\t  skew /= scaleY;\n\t\n\t  // step (6)\n\t  if (A * D < B * C) {\n\t    A = -A;\n\t    B = -B;\n\t    skew = -skew;\n\t    scaleX = -scaleX;\n\t  }\n\t\n\t  return {\n\t    translateX: m[4],\n\t    translateY: m[5],\n\t    rotate: rtod(Math.atan2(B, A)),\n\t    skew: rtod(Math.atan(skew)),\n\t    scaleX: round(scaleX),\n\t    scaleY: round(scaleY)\n\t  };\n\t};\n\t\n\t/**\n\t * Get the computed style\n\t *\n\t * @param {Element} el\n\t * @return {String}\n\t * @api private\n\t */\n\t\n\tfunction style(el) {\n\t  var style = window.getComputedStyle(el);\n\t\n\t  return style.getPropertyValue('transform') || style.getPropertyValue('-webkit-transform') || style.getPropertyValue('-moz-transform') || style.getPropertyValue('-ms-transform') || style.getPropertyValue('-o-transform');\n\t};\n\t\n\t/**\n\t * String to matrix\n\t *\n\t * @param {String} style\n\t * @return {Array}\n\t * @api private\n\t */\n\t\n\tfunction stom(str) {\n\t  var m = [];\n\t\n\t  if (window.WebKitCSSMatrix) {\n\t    m = new window.WebKitCSSMatrix(str);\n\t    return [m.a, m.b, m.c, m.d, m.e, m.f];\n\t  }\n\t\n\t  var rdigit = /[\\d\\.\\-]+/g;\n\t  var n;\n\t\n\t  while (n = rdigit.exec(str)) {\n\t    m.push(+n);\n\t  }\n\t\n\t  return m;\n\t};\n\t\n\t/**\n\t * Radians to degrees\n\t *\n\t * @param {Number} radians\n\t * @return {Number} degrees\n\t * @api private\n\t */\n\t\n\tfunction rtod(radians) {\n\t  var deg = radians * 180 / Math.PI;\n\t  return round(deg);\n\t}\n\t\n\t/**\n\t * Round to the nearest hundredth\n\t *\n\t * @param {Number} n\n\t * @return {Number}\n\t * @api private\n\t */\n\t\n\tfunction round(n) {\n\t  return Math.round(n * 100) / 100;\n\t}\n\n/***/ })\n/******/ ])\n});\n;\n"],"sourceRoot":"/source/"}