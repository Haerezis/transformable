{"version":3,"sources":["transformable.min.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_minivents","_minivents2","_utils","_utils2","_unmatrix","_unmatrix2","Transformable","element","container","center","matrix","lastState","x","y","width","offsetWidth","height","offsetHeight","compensation","angle","rotate","currentState","Dup","style","top","bottom","left","right","moveInfos","resizeInfos","rotationInfos","rotationStep","minimumSize","_resizeOnMousedownBound","_resizeOnMousedown","bind","_resizeOnMousemoveBound","_resizeOnMousemove","_resizeOnMouseupBound","_resizeOnMouseup","_moveOnMousedownBound","_moveOnMousedown","_moveOnMousemoveBound","_moveOnMousemove","_moveOnMouseupBound","_moveOnMouseup","_rotationOnMousedownBound","_rotationOnMousedown","_rotationOnMousemoveBound","_rotationOnMousemove","_rotationOnMouseupBound","_rotationOnMouseup","_addHandles","update","handles","classList","add","remove","inc","position","resize","delta","_transform","_normalize","boundingRect","getBoundingClientRect","_positionFromWorldToContainer","insertAdjacentHTML","querySelector","_addMoveHandle","_addResizeHandles","_addRotationHandle","resize_handles","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","handle","addEventListener","err","return","move_handle","rotation_handle","updateLastState","arguments","s","transform","transformOrigin","pos","containerBoundingBox","event","button","initial","mouse","clientX","clientY","document","emit","relativePosition","move","moveTo","removeEventListener","handleClass","keys","filter","contains","includes","start","current","Rotate","resizeBy","centerToMouse","Angle","Math","round","rotateTo","n","t","e","on","r","l","push","off","o","u","splice","slice","apply","Utils","source","atan2","Cross","Dot","PI","v1","v2","point","radians","cos","sin","object","JSON","parse","stringify","el","wrapper","parentNode","insertBefore","appendChild","unmatrix","str","stom","A","B","C","D","Error","scaleX","sqrt","skew","scaleY","translateX","translateY","rtod","atan","window","getComputedStyle","getPropertyValue","WebKitCSSMatrix","a","b","d","f","rdigit","exec","deg"],"mappings":"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","file":"transformable.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"transformable\"] = factory();\n\telse\n\t\troot[\"transformable\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _minivents = __webpack_require__(1);\n\t\n\tvar _minivents2 = _interopRequireDefault(_minivents);\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tvar _utils2 = _interopRequireDefault(_utils);\n\t\n\tvar _unmatrix = __webpack_require__(3);\n\t\n\tvar _unmatrix2 = _interopRequireDefault(_unmatrix);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Transformable = function () {\n\t\n\t  ////////////////////////////////////////////\n\t  //// PUBLIC\n\t  ////////////////////////////////////////////\n\t\n\t  /**\n\t   * Create a Transformable instance\n\t   * @constructor\n\t   * @param element - The DOM element to attach to.\n\t   * @param container - The DOM element that where the mousemove event will be detected.\n\t   */\n\t  function Transformable(element, container) {\n\t    _classCallCheck(this, Transformable);\n\t\n\t    // Mixing minivent to this instance for on/off/this.emit methods\n\t    (0, _minivents2.default)(this);\n\t\n\t    this.element = element;\n\t    this.container = container;\n\t\n\t    var center = this.center();\n\t    var matrix = (0, _unmatrix2.default)(this.element);\n\t    this.lastState = {\n\t      x: center.x,\n\t      y: center.y,\n\t      width: this.element.offsetWidth,\n\t      height: this.element.offsetHeight,\n\t      compensation: {\n\t        x: 0,\n\t        y: 0\n\t      },\n\t      angle: matrix.rotate\n\t    };\n\t    this.currentState = _utils2.default.Dup(this.lastState);\n\t\n\t    this.element.style.top = \"0px\";\n\t    this.element.style.bottom = \"0px\";\n\t    this.element.style.left = \"0px\";\n\t    this.element.style.right = \"0px\";\n\t\n\t    this.moveInfos = {};\n\t    this.resizeInfos = {};\n\t    this.rotationInfos = {};\n\t\n\t    this.rotationStep = 5;\n\t    this.minimumSize = 10;\n\t\n\t    // Callback needs to have \"this\" bound or else \"this\" won't be the instance of the class.\n\t    this._resizeOnMousedownBound = this._resizeOnMousedown.bind(this);\n\t    this._resizeOnMousemoveBound = this._resizeOnMousemove.bind(this);\n\t    this._resizeOnMouseupBound = this._resizeOnMouseup.bind(this);\n\t    this._moveOnMousedownBound = this._moveOnMousedown.bind(this);\n\t    this._moveOnMousemoveBound = this._moveOnMousemove.bind(this);\n\t    this._moveOnMouseupBound = this._moveOnMouseup.bind(this);\n\t    this._rotationOnMousedownBound = this._rotationOnMousedown.bind(this);\n\t    this._rotationOnMousemoveBound = this._rotationOnMousemove.bind(this);\n\t    this._rotationOnMouseupBound = this._rotationOnMouseup.bind(this);\n\t\n\t    this._addHandles();\n\t\n\t    this.update();\n\t  }\n\t\n\t  /**\n\t   * Disable the handles (and thus interaction with the Transformable instance).\n\t   */\n\t\n\t\n\t  _createClass(Transformable, [{\n\t    key: 'disable',\n\t    value: function disable() {\n\t      this.handles.classList.add('hidden');\n\t    }\n\t\n\t    /**\n\t     * Enable the handles.\n\t     */\n\t\n\t  }, {\n\t    key: 'enable',\n\t    value: function enable() {\n\t      this.handles.classList.remove('hidden');\n\t    }\n\t\n\t    /**\n\t     * Move the Transformable by an increment.\n\t     * @param {Object} inc - the position increment => {x: 42, y: 42}.\n\t     */\n\t\n\t  }, {\n\t    key: 'moveBy',\n\t    value: function moveBy(inc) {\n\t      this.currentState.x += inc.x;\n\t      this.currentState.y += inc.y;\n\t    }\n\t\n\t    /**\n\t     * Move the Transformable to a specific position.\n\t     * Warning : the Transformable's origin is not the top left but the center.\n\t     *\n\t     * @param {Object} position - the position where the element should be moved => {x: 42, y: 42}.\n\t     */\n\t\n\t  }, {\n\t    key: 'moveTo',\n\t    value: function moveTo(position) {\n\t      this.currentState.x = position.x;\n\t      this.currentState.y = position.y;\n\t    }\n\t\n\t    /**\n\t     * Resize the Transformable by an increment.\n\t     * @param {Object} resize - The resize values for the 4 sides of the element => {left:a, top:b, right:c, bottom:d}.\n\t     */\n\t\n\t  }, {\n\t    key: 'resizeBy',\n\t    value: function resizeBy(resize) {\n\t      resize.left = resize.left || 0;\n\t      resize.right = resize.right || 0;\n\t      resize.top = resize.top || 0;\n\t      resize.bottom = resize.bottom || 0;\n\t\n\t      var delta = {\n\t        x: resize.right + resize.left,\n\t        y: resize.top + resize.bottom\n\t      };\n\t\n\t      if (this.currentState.width + delta.x < this.minimumSize) {\n\t        delta.x = this.minimumSize - this.currentState.width;\n\t      }\n\t      if (this.currentState.height + delta.y < this.minimumSize) {\n\t        delta.y = this.minimumSize - this.currentState.height;\n\t      }\n\t\n\t      this.currentState.width += delta.x;\n\t      if (resize.left != 0) {\n\t        this.currentState.compensation.x -= delta.x / 2;\n\t      }\n\t      if (resize.right != 0) {\n\t        this.currentState.compensation.x += delta.x / 2;\n\t      }\n\t\n\t      this.currentState.height += delta.y;\n\t      if (resize.top != 0) {\n\t        this.currentState.compensation.y -= delta.y / 2;\n\t      }\n\t      if (resize.bottom != 0) {\n\t        this.currentState.compensation.y += delta.y / 2;\n\t      }\n\t    }\n\t\n\t    /**\n\t     * Rotate the Transformable by an angle.\n\t     * @param {Integer} angle - the angle to rotate to (in degree).\n\t     */\n\t\n\t  }, {\n\t    key: 'rotateBy',\n\t    value: function rotateBy(angle) {\n\t      this.currentState.angle += angle;\n\t    }\n\t\n\t    /**\n\t     * Set the rotation angle of the Transformable.\n\t     * @param {Integer} angle - the angle of the element after rotation (in degree).\n\t     */\n\t\n\t  }, {\n\t    key: 'rotateTo',\n\t    value: function rotateTo(angle) {\n\t      this.currentState.angle = angle;\n\t    }\n\t\n\t    /**\n\t     * Update the display of the Transformable based on its internal state.\n\t     */\n\t\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      this._transform(true);\n\t      this._normalize();\n\t    }\n\t\n\t    /**\n\t     * Get the center position (inside the container) of the Transformable.\n\t     */\n\t\n\t  }, {\n\t    key: 'center',\n\t    value: function center() {\n\t      var containerBoundingBox = this.container.getBoundingClientRect();\n\t      var boundingRect = this.element.getBoundingClientRect();\n\t\n\t      return this._positionFromWorldToContainer({\n\t        x: boundingRect.left + boundingRect.width / 2,\n\t        y: boundingRect.top + boundingRect.height / 2\n\t      });\n\t    }\n\t\n\t    /**\n\t     * Get the current width of the Transformable.\n\t     */\n\t\n\t  }, {\n\t    key: 'width',\n\t    value: function width() {\n\t      return this.currentState.width;\n\t    }\n\t\n\t    /**\n\t     * Get the current height of the Transformable.\n\t     */\n\t\n\t  }, {\n\t    key: 'height',\n\t    value: function height() {\n\t      return this.currentState.height;\n\t    }\n\t\n\t    /**\n\t     * Get the current position of the Transformable.\n\t     */\n\t\n\t  }, {\n\t    key: 'position',\n\t    value: function position() {\n\t      return { x: this.currentState.x, y: this.currentState.y };\n\t    }\n\t\n\t    /**\n\t     * Get the current angle (in degree) of the Transformable.\n\t     */\n\t\n\t  }, {\n\t    key: 'angle',\n\t    value: function angle() {\n\t      return this.currentState.angle;\n\t    }\n\t\n\t    ////////////////////////////////////////////\n\t    //// PROTECTED\n\t    ////////////////////////////////////////////\n\t\n\t  }, {\n\t    key: '_addHandles',\n\t    value: function _addHandles() {\n\t      this.element.insertAdjacentHTML('beforeend', '<div class=\"handles noselect\"></div>');\n\t      this.handles = this.element.querySelector('.handles');\n\t\n\t      this._addMoveHandle();\n\t      this._addResizeHandles();\n\t      this._addRotationHandle();\n\t    }\n\t  }, {\n\t    key: '_addResizeHandles',\n\t    value: function _addResizeHandles() {\n\t      var handles = ['tl', 'tm', 'tr', 'ml', 'mr', 'bl', 'bm', 'br'];\n\t\n\t      this.resize_handles = {};\n\t      var _iteratorNormalCompletion = true;\n\t      var _didIteratorError = false;\n\t      var _iteratorError = undefined;\n\t\n\t      try {\n\t        for (var _iterator = handles[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t          var handle = _step.value;\n\t\n\t          this.handles.insertAdjacentHTML('beforeend', '<span class=\\'resize_handles ' + handle + '\\'></span>');\n\t          this.resize_handles[handle] = this.element.querySelector('.resize_handles.' + handle);\n\t          this.resize_handles[handle].addEventListener('mousedown', this._resizeOnMousedownBound);\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError = true;\n\t        _iteratorError = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion && _iterator.return) {\n\t            _iterator.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError) {\n\t            throw _iteratorError;\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: '_addMoveHandle',\n\t    value: function _addMoveHandle() {\n\t      this.handles.insertAdjacentHTML('beforeend', '\\n        <span class=\\'move_handle\\'></span>\\n    ');\n\t\n\t      this.move_handle = this.element.querySelector('.move_handle');\n\t      this.move_handle.addEventListener('mousedown', this._moveOnMousedownBound);\n\t    }\n\t  }, {\n\t    key: '_addRotationHandle',\n\t    value: function _addRotationHandle() {\n\t      this.handles.insertAdjacentHTML('beforeend', '\\n        <span class=\\'rotation_handle\\'></span>\\n    ');\n\t\n\t      this.rotation_handle = this.element.querySelector('.rotation_handle');\n\t      this.rotation_handle.addEventListener('mousedown', this._rotationOnMousedownBound);\n\t    }\n\t\n\t    /**\n\t     * Apply current state transformation to the element\n\t     * @param {Boolean} updateLastState update this.lastState to this.currentState if true at the end of the method.\n\t     */\n\t\n\t  }, {\n\t    key: '_transform',\n\t    value: function _transform() {\n\t      var updateLastState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\t\n\t      var s = this.currentState;\n\t      var transform = '\\n      translate(' + s.x + 'px, ' + s.y + 'px)\\n      rotate(' + s.angle + 'deg)\\n      translate(calc(' + s.compensation.x + 'px - 50%), calc(' + s.compensation.y + 'px - 50%))\\n      ';\n\t\n\t      this.element.style.width = s.width + 'px';\n\t      this.element.style.height = s.height + 'px';\n\t      this.element.style.transform = transform;\n\t      this.element.style.transformOrigin = 'left top';\n\t\n\t      if (updateLastState) {\n\t        this.lastState = _utils2.default.Dup(s);\n\t      }\n\t    }\n\t\n\t    /**\n\t     * Normalize the current position and clear compensation.\n\t     */\n\t\n\t  }, {\n\t    key: '_normalize',\n\t    value: function _normalize() {\n\t      var center = this.center();\n\t      this.currentState.x = center.x;\n\t      this.currentState.y = center.y;\n\t      this.currentState.compensation = { x: 0, y: 0 };\n\t      this._transform();\n\t    }\n\t\n\t    /**\n\t     * Transform the given world position into a position relative to the container given.\n\t     * @param {Object} pos - The world position to transform => {x:a, y:b}.\n\t     */\n\t\n\t  }, {\n\t    key: '_positionFromWorldToContainer',\n\t    value: function _positionFromWorldToContainer(pos) {\n\t      var containerBoundingBox = this.container.getBoundingClientRect();\n\t\n\t      return {\n\t        x: pos.x - containerBoundingBox.left,\n\t        y: pos.y - containerBoundingBox.top\n\t      };\n\t    }\n\t\n\t    //////////////////////////////////////////////\n\t    // CALLBACK\n\t    /////////////////////////////////////////////\n\t\n\t    ////////////\n\t    // move callback\n\t    ////////////\n\t\n\t  }, {\n\t    key: '_moveOnMousedown',\n\t    value: function _moveOnMousedown(event) {\n\t      //If left mouse\n\t      if (event.button == 0) {\n\t        this.moveInfos.initial = {\n\t          x: this.currentState.x,\n\t          y: this.currentState.y\n\t        };\n\t        this.moveInfos.mouse = this._positionFromWorldToContainer({\n\t          x: event.clientX,\n\t          y: event.clientY\n\t        });\n\t\n\t        this.container.addEventListener('mousemove', this._moveOnMousemoveBound);\n\t        document.addEventListener('mouseup', this._moveOnMouseupBound);\n\t\n\t        this.emit('move:start');\n\t      }\n\t    }\n\t  }, {\n\t    key: '_moveOnMousemove',\n\t    value: function _moveOnMousemove(event) {\n\t      var relativePosition = this._positionFromWorldToContainer({\n\t        x: event.clientX,\n\t        y: event.clientY\n\t      });\n\t      var move = {\n\t        x: relativePosition.x - this.moveInfos.mouse.x + this.moveInfos.initial.x,\n\t        y: relativePosition.y - this.moveInfos.mouse.y + this.moveInfos.initial.y\n\t      };\n\t\n\t      this.moveTo(move);\n\t      this._transform();\n\t\n\t      this.emit('move:ongoing');\n\t    }\n\t  }, {\n\t    key: '_moveOnMouseup',\n\t    value: function _moveOnMouseup(event) {\n\t      this.update();\n\t\n\t      this.container.removeEventListener('mousemove', this._moveOnMousemoveBound);\n\t      document.removeEventListener('mouseup', this._moveOnMouseupBound);\n\t\n\t      this.emit('move:stop');\n\t    }\n\t\n\t    ////////////\n\t    // resize callbacks\n\t    ////////////\n\t\n\t  }, {\n\t    key: '_resizeOnMousedown',\n\t    value: function _resizeOnMousedown(event) {\n\t      //If left mouse\n\t      if (event.button == 0) {\n\t        this.emit('resize:start');\n\t\n\t        var handleClass = Object.keys(this.resize_handles).filter(function (x) {\n\t          return event.target.classList.contains(x);\n\t        })[0];\n\t\n\t        //handles on the top or left side also change the position of the element to counterbalance the size change.\n\t        this.resizeInfos.resize = {\n\t          left: handleClass.includes('l'),\n\t          right: handleClass.includes('r'),\n\t          top: handleClass.includes('t'),\n\t          bottom: handleClass.includes('b')\n\t        };\n\t        this.resizeInfos.mouse = this._positionFromWorldToContainer({\n\t          x: event.clientX,\n\t          y: event.clientY\n\t        });\n\t\n\t        this.container.addEventListener('mousemove', this._resizeOnMousemoveBound);\n\t        document.addEventListener('mouseup', this._resizeOnMouseupBound);\n\t      }\n\t    }\n\t  }, {\n\t    key: '_resizeOnMousemove',\n\t    value: function _resizeOnMousemove(event) {\n\t      var relativePosition = this._positionFromWorldToContainer({\n\t        x: event.clientX,\n\t        y: event.clientY\n\t      });\n\t\n\t      //Rotate start and current mouse position to match this.element rotated referentiel\n\t      var center = this.center();\n\t      var start = {\n\t        x: this.resizeInfos.mouse.x - center.x,\n\t        y: this.resizeInfos.mouse.y - center.y\n\t      };\n\t      var current = {\n\t        x: relativePosition.x - center.x,\n\t        y: relativePosition.y - center.y\n\t      };\n\t      start = _utils2.default.Rotate(start, -this.currentState.angle);\n\t      current = _utils2.default.Rotate(current, -this.currentState.angle);\n\t\n\t      var delta = {\n\t        x: current.x - start.x,\n\t        y: current.y - start.y\n\t      };\n\t\n\t      var resize = {\n\t        left: 0,\n\t        right: 0,\n\t        top: 0,\n\t        bottom: 0\n\t      };\n\t      if (this.resizeInfos.resize.left) {\n\t        resize.left = -delta.x;\n\t      }\n\t      if (this.resizeInfos.resize.right) {\n\t        resize.right = delta.x;\n\t      }\n\t      if (this.resizeInfos.resize.top) {\n\t        resize.top = -delta.y;\n\t      }\n\t      if (this.resizeInfos.resize.bottom) {\n\t        resize.bottom = delta.y;\n\t      }\n\t\n\t      this.currentState = _utils2.default.Dup(this.lastState);\n\t      this.resizeBy(resize);\n\t      this._transform(false);\n\t\n\t      this.emit('resize:ongoing');\n\t    }\n\t  }, {\n\t    key: '_resizeOnMouseup',\n\t    value: function _resizeOnMouseup(event) {\n\t      this.update();\n\t\n\t      this.container.removeEventListener('mousemove', this._resizeOnMousemoveBound);\n\t      document.removeEventListener('mouseup', this._resizeOnMouseupBound);\n\t\n\t      this.emit('resize:stop');\n\t    }\n\t\n\t    ////////////\n\t    // Rotation callbacks\n\t    ////////////\n\t\n\t  }, {\n\t    key: '_rotationOnMousedown',\n\t    value: function _rotationOnMousedown(event) {\n\t      //If left mouse\n\t      if (event.button == 0) {\n\t        var relativePosition = this._positionFromWorldToContainer({\n\t          x: event.clientX,\n\t          y: event.clientY\n\t        });\n\t\n\t        this.rotationInfos.angle = this.currentState.angle;\n\t        this.rotationInfos.center = this.center();\n\t        this.rotationInfos.centerToMouse = {\n\t          x: relativePosition.x - this.rotationInfos.center.x,\n\t          y: this.rotationInfos.center.y - relativePosition.y\n\t        };\n\t\n\t        this.container.addEventListener('mousemove', this._rotationOnMousemoveBound);\n\t        document.addEventListener('mouseup', this._rotationOnMouseupBound);\n\t\n\t        this.emit('rotation:start');\n\t      }\n\t    }\n\t  }, {\n\t    key: '_rotationOnMousemove',\n\t    value: function _rotationOnMousemove(event) {\n\t      var relativePosition = this._positionFromWorldToContainer({\n\t        x: event.clientX,\n\t        y: event.clientY\n\t      });\n\t\n\t      var centerToMouse = {\n\t        x: relativePosition.x - this.rotationInfos.center.x,\n\t        y: this.rotationInfos.center.y - relativePosition.y\n\t      };\n\t\n\t      var angle = _utils2.default.Angle(this.rotationInfos.centerToMouse, centerToMouse);\n\t      angle = Math.round(angle / this.rotationStep) * this.rotationStep;\n\t\n\t      this.rotateTo(this.rotationInfos.angle + angle);\n\t      this._transform();\n\t\n\t      this.emit('rotation:ongoing');\n\t    }\n\t  }, {\n\t    key: '_rotationOnMouseup',\n\t    value: function _rotationOnMouseup(event) {\n\t      this.update();\n\t\n\t      this.container.removeEventListener('mousemove', this._rotationOnMousemoveBound);\n\t      document.removeEventListener('mouseup', this._rotationOnMouseupBound);\n\t\n\t      this.emit('rotation:stop');\n\t    }\n\t  }]);\n\t\n\t  return Transformable;\n\t}();\n\t\n\texports.default = Transformable;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\tmodule.exports=function(n){var t={},e=[];n=n||this,n.on=function(e,r,l){return(t[e]=t[e]||[]).push([r,l]),n},n.off=function(r,l){r||(t={});for(var o=t[r]||e,u=o.length=l?o.length:0;u--;)l==o[u][0]&&o.splice(u,1);return n},n.emit=function(r){for(var l,o=t[r]||e,u=o.length>0?o.slice(0,o.length):o,i=0;l=u[i++];)l[0].apply(l[1],e.slice.call(arguments,1));return n}};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Utils = function () {\n\t  function Utils() {\n\t    _classCallCheck(this, Utils);\n\t  }\n\t\n\t  _createClass(Utils, null, [{\n\t    key: \"Angle\",\n\t    value: function Angle(target, source) {\n\t      //return (Math.atan2(target.y, target.x) - Math.atan2(target.y, target.x)) * 180 / Math.PI;\n\t      return Math.atan2(Utils.Cross(source, target), Utils.Dot(source, target)) * 180 / Math.PI;\n\t    }\n\t  }, {\n\t    key: \"Dot\",\n\t    value: function Dot(v1, v2) {\n\t      return v1.x * v2.x + v1.y * v2.y;\n\t    }\n\t  }, {\n\t    key: \"Cross\",\n\t    value: function Cross(v1, v2) {\n\t      return v1.x * v2.y - v1.y * v2.x;\n\t    }\n\t  }, {\n\t    key: \"Rotate\",\n\t    value: function Rotate(point, angle) {\n\t      var radians = Math.PI / 180 * angle;\n\t      var cos = Math.cos(radians);\n\t      var sin = Math.sin(radians);\n\t\n\t      return {\n\t        x: cos * point.x - sin * point.y,\n\t        y: cos * point.y + sin * point.x\n\t      };\n\t    }\n\t  }, {\n\t    key: \"Dup\",\n\t    value: function Dup(object) {\n\t      return JSON.parse(JSON.stringify(object));\n\t    }\n\t  }, {\n\t    key: \"Wrap\",\n\t    value: function Wrap(el, wrapper) {\n\t      el.parentNode.insertBefore(wrapper, el);\n\t      wrapper.appendChild(el);\n\t    }\n\t  }]);\n\t\n\t  return Utils;\n\t}();\n\t\n\texports.default = Utils;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/**\n\t * Code taken from https://github.com/matthewmueller/unmatrix\n\t */\n\t\n\t/**\n\t * Expose `unmatrix`\n\t */\n\t\n\texports.default = unmatrix;\n\t\n\t/**\n\t * Unmatrix\n\t *\n\t * @param {Element} el\n\t * @return {Object}\n\t */\n\t\n\tfunction unmatrix(el) {\n\t  return 'string' != typeof el ? parse(style(el)) : parse(el);\n\t}\n\t\n\t/**\n\t * Unmatrix: parse the values of the matrix\n\t *\n\t * Algorithm from:\n\t *\n\t * - http://hg.mozilla.org/mozilla-central/file/7cb3e9795d04/layout/style/nsStyleAnimation.cpp\n\t *\n\t * @param {String} str\n\t * @return {Object}\n\t * @api public\n\t */\n\t\n\tfunction parse(str) {\n\t  var m = stom(str);\n\t  var A = m[0];\n\t  var B = m[1];\n\t  var C = m[2];\n\t  var D = m[3];\n\t\n\t  if (A * D == B * C) throw new Error('transform#unmatrix: matrix is singular');\n\t\n\t  // step (3)\n\t  var scaleX = Math.sqrt(A * A + B * B);\n\t  A /= scaleX;\n\t  B /= scaleX;\n\t\n\t  // step (4)\n\t  var skew = A * C + B * D;\n\t  C -= A * skew;\n\t  D -= B * skew;\n\t\n\t  // step (5)\n\t  var scaleY = Math.sqrt(C * C + D * D);\n\t  C /= scaleY;\n\t  D /= scaleY;\n\t  skew /= scaleY;\n\t\n\t  // step (6)\n\t  if (A * D < B * C) {\n\t    A = -A;\n\t    B = -B;\n\t    skew = -skew;\n\t    scaleX = -scaleX;\n\t  }\n\t\n\t  return {\n\t    translateX: m[4],\n\t    translateY: m[5],\n\t    rotate: rtod(Math.atan2(B, A)),\n\t    skew: rtod(Math.atan(skew)),\n\t    scaleX: round(scaleX),\n\t    scaleY: round(scaleY)\n\t  };\n\t};\n\t\n\t/**\n\t * Get the computed style\n\t *\n\t * @param {Element} el\n\t * @return {String}\n\t * @api private\n\t */\n\t\n\tfunction style(el) {\n\t  var style = window.getComputedStyle(el);\n\t\n\t  return style.getPropertyValue('transform') || style.getPropertyValue('-webkit-transform') || style.getPropertyValue('-moz-transform') || style.getPropertyValue('-ms-transform') || style.getPropertyValue('-o-transform');\n\t};\n\t\n\t/**\n\t * String to matrix\n\t *\n\t * @param {String} style\n\t * @return {Array}\n\t * @api private\n\t */\n\t\n\tfunction stom(str) {\n\t  var m = [];\n\t\n\t  if (window.WebKitCSSMatrix) {\n\t    m = new window.WebKitCSSMatrix(str);\n\t    return [m.a, m.b, m.c, m.d, m.e, m.f];\n\t  }\n\t\n\t  var rdigit = /[\\d\\.\\-]+/g;\n\t  var n;\n\t\n\t  while (n = rdigit.exec(str)) {\n\t    m.push(+n);\n\t  }\n\t\n\t  return m;\n\t};\n\t\n\t/**\n\t * Radians to degrees\n\t *\n\t * @param {Number} radians\n\t * @return {Number} degrees\n\t * @api private\n\t */\n\t\n\tfunction rtod(radians) {\n\t  var deg = radians * 180 / Math.PI;\n\t  return round(deg);\n\t}\n\t\n\t/**\n\t * Round to the nearest hundredth\n\t *\n\t * @param {Number} n\n\t * @return {Number}\n\t * @api private\n\t */\n\t\n\tfunction round(n) {\n\t  return Math.round(n * 100) / 100;\n\t}\n\n/***/ })\n/******/ ])\n});\n;\n"],"sourceRoot":"/source/"}