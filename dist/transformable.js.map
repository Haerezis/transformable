{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 295dd638a24bba423774","webpack:///./src/transformable.js","webpack:///./~/minivents/dist/minivents.commonjs.min.js","webpack:///./src/utils.js","webpack:///./src/unmatrix.js"],"names":["Transformable","element","container","center","matrix","lastState","x","y","width","offsetWidth","height","offsetHeight","compensation","angle","rotate","currentState","Dup","style","top","bottom","left","right","moveInfos","resizeInfos","rotationInfos","rotationStep","minimumSize","_resizeOnMousedownBound","_resizeOnMousedown","bind","_resizeOnMousemoveBound","_resizeOnMousemove","_resizeOnMouseupBound","_resizeOnMouseup","_moveOnMousedownBound","_moveOnMousedown","_moveOnMousemoveBound","_moveOnMousemove","_moveOnMouseupBound","_moveOnMouseup","_rotationOnMousedownBound","_rotationOnMousedown","_rotationOnMousemoveBound","_rotationOnMousemove","_rotationOnMouseupBound","_rotationOnMouseup","_addHandles","update","handles","classList","add","remove","inc","position","resize","delta","_transform","_normalize","containerBoundingBox","getBoundingClientRect","boundingRect","_positionFromWorldToContainer","insertAdjacentHTML","querySelector","_addMoveHandle","_addResizeHandles","_addRotationHandle","resize_handles","handle","addEventListener","move_handle","rotation_handle","updateLastState","s","transform","transformOrigin","pos","event","button","initial","mouse","clientX","clientY","document","emit","relativePosition","move","moveTo","removeEventListener","handleClass","Object","keys","filter","target","contains","includes","start","current","Rotate","resizeBy","centerToMouse","Angle","Math","round","rotateTo","Utils","source","atan2","Cross","Dot","PI","v1","v2","point","radians","cos","sin","object","JSON","parse","stringify","el","wrapper","parentNode","insertBefore","appendChild","unmatrix","str","m","stom","A","B","C","D","Error","scaleX","sqrt","skew","scaleY","translateX","translateY","rtod","atan","window","getComputedStyle","getPropertyValue","WebKitCSSMatrix","a","b","c","d","e","f","rdigit","n","exec","push","deg"],"mappings":"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","file":"transformable.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"transformable\"] = factory();\n\telse\n\t\troot[\"transformable\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 295dd638a24bba423774","import Events from 'minivents'\nimport Utils from './utils'\nimport unmatrix from './unmatrix'\n\nclass Transformable {\n\n  ////////////////////////////////////////////\n  //// PUBLIC\n  ////////////////////////////////////////////\n  \n  /**\n   * Create a Transformable instance\n   * @constructor\n   * @param element - The DOM element to attach to.\n   * @param container - The DOM element that where the mousemove event will be detected.\n   */\n  constructor(element, container) {\n    // Mixing minivent to this instance for on/off/this.emit methods\n    Events(this);\n\n    this.element = element;\n    this.container = container;\n\n    const center = this.center();\n    const matrix = unmatrix(this.element);\n    this.lastState = {\n      x: center.x,\n      y: center.y,\n      width: this.element.offsetWidth,\n      height: this.element.offsetHeight,\n      compensation: {\n        x: 0,\n        y: 0\n      },\n      angle: matrix.rotate\n    };\n    this.currentState = Utils.Dup(this.lastState);\n\n    this.element.style.top = \"0px\";\n    this.element.style.bottom = \"0px\";\n    this.element.style.left = \"0px\";\n    this.element.style.right = \"0px\";\n\n    this.moveInfos = {};\n    this.resizeInfos = {};\n    this.rotationInfos = {};\n\n    this.rotationStep = 5;\n    this.minimumSize = 10;\n\n    // Callback needs to have \"this\" bound or else \"this\" won't be the instance of the class.\n    this._resizeOnMousedownBound = this._resizeOnMousedown.bind(this);\n    this._resizeOnMousemoveBound = this._resizeOnMousemove.bind(this);\n    this._resizeOnMouseupBound = this._resizeOnMouseup.bind(this);\n    this._moveOnMousedownBound = this._moveOnMousedown.bind(this);\n    this._moveOnMousemoveBound = this._moveOnMousemove.bind(this);\n    this._moveOnMouseupBound = this._moveOnMouseup.bind(this);\n    this._rotationOnMousedownBound = this._rotationOnMousedown.bind(this);\n    this._rotationOnMousemoveBound = this._rotationOnMousemove.bind(this);\n    this._rotationOnMouseupBound = this._rotationOnMouseup.bind(this);\n\n    this._addHandles();\n\n    this.update();\n  }\n\n  /**\n   * Disable the handles (and thus interaction with the Transformable instance).\n   */\n  disable() {\n    this.handles.classList.add('hidden');\n  }\n\n  /**\n   * Enable the handles.\n   */\n  enable() {\n    this.handles.classList.remove('hidden');\n  }\n\n  /**\n   * Move the Transformable by an increment.\n   * @param {Object} inc - the position increment => {x: 42, y: 42}.\n   */\n  moveBy(inc) {\n    this.currentState.x += inc.x;\n    this.currentState.y += inc.y;\n  }\n\n  /**\n   * Move the Transformable to a specific position.\n   * Warning : the Transformable's origin is not the top left but the center.\n   *\n   * @param {Object} position - the position where the element should be moved => {x: 42, y: 42}.\n   */\n  moveTo(position) {\n    this.currentState.x = position.x;\n    this.currentState.y = position.y;\n  }\n\n  /**\n   * Resize the Transformable by an increment.\n   * @param {Object} resize - The resize values for the 4 sides of the element => {left:a, top:b, right:c, bottom:d}.\n   */\n  resizeBy(resize) {\n    resize.left = resize.left || 0;\n    resize.right = resize.right || 0;\n    resize.top = resize.top || 0;\n    resize.bottom = resize.bottom || 0;\n\n    let delta = {\n      x: resize.right + resize.left,\n      y: resize.top + resize.bottom\n    }\n\n    if (this.currentState.width + delta.x < this.minimumSize) {\n      delta.x = this.minimumSize - this.currentState.width;\n    }\n    if (this.currentState.height + delta.y < this.minimumSize) {\n      delta.y = this.minimumSize - this.currentState.height;\n    }\n\n    this.currentState.width += delta.x;\n    if(resize.left != 0) {\n      this.currentState.compensation.x -= delta.x / 2; \n    }\n    if(resize.right != 0) {\n      this.currentState.compensation.x += delta.x / 2;\n    }\n\n    this.currentState.height += delta.y;\n    if(resize.top != 0) {\n      this.currentState.compensation.y -= delta.y / 2; \n    }\n    if(resize.bottom != 0) {\n      this.currentState.compensation.y += delta.y / 2;\n    }\n  }\n\n  /**\n   * Rotate the Transformable by an angle.\n   * @param {Integer} angle - the angle to rotate to (in degree).\n   */\n  rotateBy(angle) {\n    this.currentState.angle += angle;\n  }\n\n  /**\n   * Set the rotation angle of the Transformable.\n   * @param {Integer} angle - the angle of the element after rotation (in degree).\n   */\n  rotateTo(angle) {\n    this.currentState.angle = angle;\n  }\n\n  /**\n   * Update the display of the Transformable based on its internal state.\n   */\n  update() {\n    this._transform(true);\n    this._normalize();\n  }\n\n  /**\n   * Get the center position (inside the container) of the Transformable.\n   */\n  center() {\n    const containerBoundingBox = this.container.getBoundingClientRect();\n    const boundingRect = this.element.getBoundingClientRect();\n\n    return this._positionFromWorldToContainer({\n      x: boundingRect.left + (boundingRect.width / 2),\n      y: boundingRect.top + (boundingRect.height / 2)\n    });\n  }\n\n  /**\n   * Get the current width of the Transformable.\n   */\n  width() {\n    return this.currentState.width;\n  }\n\n  /**\n   * Get the current height of the Transformable.\n   */\n  height() {\n    return this.currentState.height;\n  }\n\n  /**\n   * Get the current position of the Transformable.\n   */\n  position() {\n    return { x: this.currentState.x, y: this.currentState.y };\n  }\n\n  /**\n   * Get the current angle (in degree) of the Transformable.\n   */\n  angle() {\n    return this.currentState.angle;\n  }\n\n  ////////////////////////////////////////////\n  //// PROTECTED\n  ////////////////////////////////////////////\n  \n  _addHandles() {\n    this.element.insertAdjacentHTML('beforeend', '<div class=\"handles noselect\"></div>');\n    this.handles = this.element.querySelector('.handles');\n\n    this._addMoveHandle();\n    this._addResizeHandles();\n    this._addRotationHandle();\n  }\n\n  _addResizeHandles() {\n    const handles = ['tl', 'tm', 'tr', 'ml', 'mr', 'bl', 'bm', 'br'];\n\n    this.resize_handles = {}\n    for(let handle of handles) {\n      this.handles.insertAdjacentHTML('beforeend', `<span class='resize_handles ${handle}'></span>`);\n      this.resize_handles[handle] = this.element.querySelector(`.resize_handles.${handle}`)\n      this.resize_handles[handle].addEventListener('mousedown', this._resizeOnMousedownBound);\n    }\n  }\n\n  _addMoveHandle() {\n    this.handles.insertAdjacentHTML('beforeend', `\n        <span class='move_handle'></span>\n    `);\n\n    this.move_handle = this.element.querySelector('.move_handle');\n    this.move_handle.addEventListener('mousedown', this._moveOnMousedownBound);\n  }\n\n  _addRotationHandle() {\n    this.handles.insertAdjacentHTML('beforeend', `\n        <span class='rotation_handle'></span>\n    `);\n\n    this.rotation_handle = this.element.querySelector('.rotation_handle');\n    this.rotation_handle.addEventListener('mousedown', this._rotationOnMousedownBound);\n  }\n\n  /**\n   * Apply current state transformation to the element\n   * @param {Boolean} updateLastState update this.lastState to this.currentState if true at the end of the method.\n   */\n  _transform(updateLastState = true) {\n    const s = this.currentState;\n    const transform = `\n      translate(${s.x}px, ${s.y}px)\n      rotate(${s.angle}deg)\n      translate(calc(${s.compensation.x}px - 50%), calc(${s.compensation.y}px - 50%))\n      `;\n\n    this.element.style.width = `${s.width}px`;\n    this.element.style.height = `${s.height}px`;\n    this.element.style.transform = transform;\n    this.element.style.transformOrigin = 'left top';\n\n    if(updateLastState) {\n      this.lastState = Utils.Dup(s);\n    }\n  }\n\n  /**\n   * Normalize the current position and clear compensation.\n   */\n  _normalize() {\n    const center = this.center();\n    this.currentState.x = center.x;\n    this.currentState.y = center.y;\n    this.currentState.compensation = {x:0, y: 0};\n    this._transform();\n  }\n\n  /**\n   * Transform the given world position into a position relative to the container given.\n   * @param {Object} pos - The world position to transform => {x:a, y:b}.\n   */\n  _positionFromWorldToContainer(pos) {\n    const containerBoundingBox = this.container.getBoundingClientRect();\n\n    return {\n      x: pos.x - containerBoundingBox.left,\n      y: pos.y - containerBoundingBox.top\n    }\n  }\n\n\n  //////////////////////////////////////////////\n  // CALLBACK\n  /////////////////////////////////////////////\n  \n  ////////////\n  // move callback\n  ////////////\n  \n  _moveOnMousedown(event) {\n    //If left mouse\n    if (event.button == 0) {\n      this.moveInfos.initial = {\n        x: this.currentState.x,\n        y: this.currentState.y\n      };\n      this.moveInfos.mouse = this._positionFromWorldToContainer({\n        x: event.clientX,\n        y: event.clientY\n      });\n\n      this.container.addEventListener('mousemove', this._moveOnMousemoveBound);\n      document.addEventListener('mouseup', this._moveOnMouseupBound);\n\n      this.emit('move:start');\n    }\n  }\n\n  _moveOnMousemove(event) {\n    const relativePosition = this._positionFromWorldToContainer({\n      x: event.clientX,\n      y: event.clientY\n    });\n    const move = {\n      x: relativePosition.x - this.moveInfos.mouse.x + this.moveInfos.initial.x,\n      y: relativePosition.y - this.moveInfos.mouse.y + this.moveInfos.initial.y\n    };\n\n    this.moveTo(move);\n    this._transform();\n\n    this.emit('move:ongoing');\n  }\n  \n  _moveOnMouseup(event) {\n    this.update();\n\n    this.container.removeEventListener('mousemove', this._moveOnMousemoveBound);\n    document.removeEventListener('mouseup', this._moveOnMouseupBound);\n    \n    this.emit('move:stop');\n  }\n  \n  ////////////\n  // resize callbacks\n  ////////////\n  \n  _resizeOnMousedown(event) {\n    //If left mouse\n    if (event.button == 0) {\n      this.emit('resize:start');\n\n      const handleClass = Object.keys(this.resize_handles).filter(x => event.target.classList.contains(x))[0];\n      \n      //handles on the top or left side also change the position of the element to counterbalance the size change.\n      this.resizeInfos.resize = {\n        left: handleClass.includes('l'),\n        right: handleClass.includes('r'),\n        top: handleClass.includes('t'),\n        bottom: handleClass.includes('b')\n      }\n      this.resizeInfos.mouse = this._positionFromWorldToContainer({\n        x: event.clientX,\n        y: event.clientY\n      });\n\n\n      this.container.addEventListener('mousemove', this._resizeOnMousemoveBound);\n      document.addEventListener('mouseup', this._resizeOnMouseupBound);\n    }\n  }\n\n  _resizeOnMousemove(event) {\n    const relativePosition = this._positionFromWorldToContainer({\n      x: event.clientX,\n      y: event.clientY\n    });\n\n    //Rotate start and current mouse position to match this.element rotated referentiel\n    const center = this.center();\n    let start = {\n      x: this.resizeInfos.mouse.x - center.x,\n      y: this.resizeInfos.mouse.y - center.y,\n    }\n    let current = {\n      x: relativePosition.x - center.x,\n      y: relativePosition.y - center.y,\n    };\n    start = Utils.Rotate(start, -this.currentState.angle);\n    current = Utils.Rotate(current, -this.currentState.angle);\n\n    \n    const delta = {\n      x: current.x - start.x,\n      y: current.y - start.y\n    }\n\n    let resize = {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    }\n    if (this.resizeInfos.resize.left) {\n      resize.left = -delta.x;\n    }\n    if (this.resizeInfos.resize.right) {\n      resize.right = delta.x\n    }\n    if (this.resizeInfos.resize.top) {\n      resize.top = -delta.y;\n    }\n    if (this.resizeInfos.resize.bottom) {\n      resize.bottom = delta.y;\n    }\n\n\n    this.currentState = Utils.Dup(this.lastState);\n    this.resizeBy(resize);\n    this._transform(false);\n\n    this.emit('resize:ongoing');\n  }\n  \n  _resizeOnMouseup(event) {\n    this.update();\n\n    this.container.removeEventListener('mousemove', this._resizeOnMousemoveBound);\n    document.removeEventListener('mouseup', this._resizeOnMouseupBound);\n    \n    this.emit('resize:stop');\n  }\n  \n  ////////////\n  // Rotation callbacks\n  ////////////\n  _rotationOnMousedown(event) {\n    //If left mouse\n    if (event.button == 0) {\n      const relativePosition = this._positionFromWorldToContainer({\n        x: event.clientX,\n        y: event.clientY\n      });\n\n      this.rotationInfos.angle = this.currentState.angle;\n      this.rotationInfos.center = this.center();\n      this.rotationInfos.centerToMouse = {\n        x: relativePosition.x - this.rotationInfos.center.x,\n        y: this.rotationInfos.center.y - relativePosition.y\n      };\n\n      this.container.addEventListener('mousemove', this._rotationOnMousemoveBound);\n      document.addEventListener('mouseup', this._rotationOnMouseupBound);\n      \n      this.emit('rotation:start');\n    }\n  }\n\n  _rotationOnMousemove(event) {\n    const relativePosition = this._positionFromWorldToContainer({\n      x: event.clientX,\n      y: event.clientY\n    });\n\n    const centerToMouse = {\n      x: relativePosition.x - this.rotationInfos.center.x,\n      y: this.rotationInfos.center.y - relativePosition.y\n    };\n\n    let angle = Utils.Angle(this.rotationInfos.centerToMouse, centerToMouse);\n    angle = Math.round(angle / this.rotationStep) * this.rotationStep;\n    \n    this.rotateTo(this.rotationInfos.angle + angle);\n    this._transform();\n    \n    this.emit('rotation:ongoing');\n  }\n\n  _rotationOnMouseup(event) {\n    this.update();\n\n    this.container.removeEventListener('mousemove', this._rotationOnMousemoveBound);\n    document.removeEventListener('mouseup', this._rotationOnMouseupBound);\n    \n    this.emit('rotation:stop');\n  }\n}\n\nexport default Transformable;\n\n\n\n// WEBPACK FOOTER //\n// ./src/transformable.js","module.exports=function(n){var t={},e=[];n=n||this,n.on=function(e,r,l){return(t[e]=t[e]||[]).push([r,l]),n},n.off=function(r,l){r||(t={});for(var o=t[r]||e,u=o.length=l?o.length:0;u--;)l==o[u][0]&&o.splice(u,1);return n},n.emit=function(r){for(var l,o=t[r]||e,u=o.length>0?o.slice(0,o.length):o,i=0;l=u[i++];)l[0].apply(l[1],e.slice.call(arguments,1));return n}};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/minivents/dist/minivents.commonjs.min.js\n// module id = 1\n// module chunks = 0","class Utils {\n  static Angle(target, source) {\n    //return (Math.atan2(target.y, target.x) - Math.atan2(target.y, target.x)) * 180 / Math.PI;\n    return Math.atan2(Utils.Cross(source, target), Utils.Dot(source, target)) * 180 / Math.PI;\n  }\n\n  static Dot(v1, v2) {\n    return v1.x * v2.x + v1.y * v2.y;\n  }\n\n  static Cross(v1, v2) {\n    return v1.x * v2.y - v1.y * v2.x;\n  }\n\n  static Rotate(point, angle) {\n    const radians = (Math.PI / 180) * angle;\n    const cos = Math.cos(radians);\n    const sin = Math.sin(radians);\n\n    return {\n      x: cos * point.x - sin * point.y,\n      y: cos * point.y + sin * point.x\n    }\n  }\n\n  static Dup(object) {\n    return JSON.parse(JSON.stringify(object));\n  }\n\n  static Wrap(el, wrapper) {\n\t    el.parentNode.insertBefore(wrapper, el);\n\t    wrapper.appendChild(el);\n\t}\n}\n\nexport default Utils;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","/**\n * Code taken from https://github.com/matthewmueller/unmatrix\n */\n\n/**\n * Expose `unmatrix`\n */\n\nexport default unmatrix;\n\n/**\n * Unmatrix\n *\n * @param {Element} el\n * @return {Object}\n */\n\nfunction unmatrix(el) {\n  return 'string' != typeof el\n    ? parse(style(el))\n    : parse(el);\n}\n\n/**\n * Unmatrix: parse the values of the matrix\n *\n * Algorithm from:\n *\n * - http://hg.mozilla.org/mozilla-central/file/7cb3e9795d04/layout/style/nsStyleAnimation.cpp\n *\n * @param {String} str\n * @return {Object}\n * @api public\n */\n\nfunction parse(str) {\n  var m = stom(str);\n  var A = m[0];\n  var B = m[1];\n  var C = m[2];\n  var D = m[3];\n\n  if (A * D == B * C) throw new Error('transform#unmatrix: matrix is singular');\n\n  // step (3)\n  var scaleX = Math.sqrt(A * A + B * B);\n  A /= scaleX;\n  B /= scaleX;\n\n  // step (4)\n  var skew = A * C + B * D;\n  C -= A * skew;\n  D -= B * skew;\n\n  // step (5)\n  var scaleY = Math.sqrt(C * C + D * D);\n  C /= scaleY;\n  D /= scaleY;\n  skew /= scaleY;\n\n  // step (6)\n  if ( A * D < B * C ) {\n    A = -A;\n    B = -B;\n    skew = -skew;\n    scaleX = -scaleX;\n  }\n\n  return {\n    translateX: m[4],\n    translateY: m[5],\n    rotate: rtod(Math.atan2(B, A)),\n    skew: rtod(Math.atan(skew)),\n    scaleX: round(scaleX),\n    scaleY: round(scaleY)\n  };\n};\n\n/**\n * Get the computed style\n *\n * @param {Element} el\n * @return {String}\n * @api private\n */\n\nfunction style(el) {\n  var style = window.getComputedStyle(el);\n\n  return style.getPropertyValue('transform')\n    || style.getPropertyValue('-webkit-transform')\n    || style.getPropertyValue('-moz-transform')\n    || style.getPropertyValue('-ms-transform')\n    || style.getPropertyValue('-o-transform');\n};\n\n/**\n * String to matrix\n *\n * @param {String} style\n * @return {Array}\n * @api private\n */\n\nfunction stom(str) {\n  var m = [];\n\n  if (window.WebKitCSSMatrix) {\n    m = new window.WebKitCSSMatrix(str);\n    return [m.a, m.b, m.c, m.d, m.e, m.f];\n  }\n\n  var rdigit = /[\\d\\.\\-]+/g;\n  var n;\n\n  while(n = rdigit.exec(str)) {\n    m.push(+n);\n  }\n\n  return m;\n};\n\n/**\n * Radians to degrees\n *\n * @param {Number} radians\n * @return {Number} degrees\n * @api private\n */\n\nfunction rtod(radians) {\n  var deg = radians * 180 / Math.PI;\n  return round(deg);\n}\n\n/**\n * Round to the nearest hundredth\n *\n * @param {Number} n\n * @return {Number}\n * @api private\n */\n\nfunction round(n) {\n  return Math.round(n * 100) / 100;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/unmatrix.js"],"sourceRoot":""}